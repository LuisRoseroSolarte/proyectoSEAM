<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>P√°gina de Inicio - Sitio Web Profesional</title>
    <link href="css/bootstrap.min.css" rel="stylesheet" />
    <link href="css/solicitar.css" rel="stylesheet" />
    <meta
      name="description"
      content="Descripci√≥n concisa y atractiva de tu p√°gina web (m√°ximo 160 caracteres). Palabras clave aqu√≠."
    />
    <meta
      name="keywords"
      content="web profesional, programaci√≥n, front-end, dise√±o web, (Tus temas clave)"
    />
    <meta name="author" content="Tu Nombre o Nombre de tu Empresa" />
    <link rel="icon" type="image/png" href="imagenes/1.png" />

    <!-- Bootstrap Icons -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
      rel="stylesheet"
    />

    <!-- google fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css"
    />
  </head>

  <body>
    <header>
      <!-- Barra de navegaci√≥n -->
      <nav class="navbar navbar-expand-lg">
        <div class="container d-flex ms-3">
          <!-- Logo -->
          <a class="navbar-brand fw-bold me-2" ref="#">
            <img
              src="imagenes/logoia2.png"
              alt="Logo"
              class="logo-animado"
              style="height: 82px; width: 186px"
            />
          </a>

          <!-- Bot√≥n hamburguesa (visible en m√≥viles) -->
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#menuPrincipal"
            aria-controls="menuPrincipal"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>

          <!-- Men√∫ -->
          <div
            class="collapse navbar-collapse justify-content-center"
            id="menuPrincipal"
          >
            <ul class="navbar-nav gap-5 ms-auto mx-auto text-center">
              <li class="nav-item">
                <a class="nav-link active" href="index.html">Inicio</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="servicios.html">Servicios</a>
              </li>

              <li class="nav-item">
                <a class="nav-link" href="contacto.html">Contacto</a>
              </li>

              <li class="nav-item">
                <a class="nav-link" href="fag.html">FAQ</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="blog.html">Blog</a>
              </li>
            </ul>
            <!-- Bot√≥n Login -->
            <a href="login.php" class="btn-login ms-3 btn-lg">
              <i class="bi bi-person-circle me-2"></i>Login
            </a>
          </div>
        </div>
      </nav>
    </header>
    <main>
      <section id="solicitud" class="py-5">
        <div class="container">
          <!-- Encabezado de la secci√≥n -->
          <div class="form-header text-center mb-5">
            <h1 class="form-main-title">Solicitud de Servicio</h1>
            <p class="form-subtitle">
              Complete el formulario y nos pondremos en contacto en menos de 24
              horas
            </p>
          </div>

          <!-- AGREGADO: √Årea para mensajes de √©xito/error -->
          <div
            id="mensajeRespuesta"
            style="
              display: none;
              padding: 15px;
              border-radius: 8px;
              margin-bottom: 20px;
              text-align: center;
              font-weight: 600;
            "
          ></div>

          <!-- Formulario -->
          <div class="form-wrapper">
            <form id="solicitudForm" class="solicitud-form">
              <!-- Tipo de Servicio (Radio Buttons) -->
              <fieldset class="form-group mb-4">
                <legend class="form-label">Tipo de Servicio Requerido *</legend>
                <div
                  class="radio-group"
                  role="radiogroup"
                  aria-label="Seleccione el tipo de servicio"
                >
                  <div class="radio-item">
                    <input
                      type="radio"
                      id="automatizacion"
                      name="tipo_servicio"
                      value="automatizacion"
                      class="radio-input"
                      required
                      aria-required="true"
                    />
                    <label for="automatizacion" class="radio-label">
                      <span class="radio-icon">‚öôÔ∏è</span>
                      <span class="radio-text">Automatizaci√≥n</span>
                    </label>
                  </div>

                  <div class="radio-item">
                    <input
                      type="radio"
                      id="termografia"
                      name="tipo_servicio"
                      value="termografia"
                      class="radio-input"
                      required
                      aria-required="true"
                    />
                    <label for="termografia" class="radio-label">
                      <span class="radio-icon">üå°Ô∏è</span>
                      <span class="radio-text">Termograf√≠a</span>
                    </label>
                  </div>

                  <div class="radio-item">
                    <input
                      type="radio"
                      id="asistencia_tecnica"
                      name="tipo_servicio"
                      value="asistencia_tecnica"
                      class="radio-input"
                      required
                      aria-required="true"
                    />
                    <label for="asistencia_tecnica" class="radio-label">
                      <span class="radio-icon">üõ†Ô∏è</span>
                      <span class="radio-text"
                        >Asistencia y Servicio T√©cnico</span
                      >
                    </label>
                  </div>

                  <div class="radio-item">
                    <input
                      type="radio"
                      id="mantenimientos"
                      name="tipo_servicio"
                      value="mantenimientos"
                      class="radio-input"
                      required
                      aria-required="true"
                    />
                    <label for="mantenimientos" class="radio-label">
                      <span class="radio-icon">üîß</span>
                      <span class="radio-text"
                        >Mantenimientos Preventivos - Predictivos y
                        Correctivos</span
                      >
                    </label>
                  </div>

                  <div class="radio-item">
                    <input
                      type="radio"
                      id="montaje_electrico"
                      name="tipo_servicio"
                      value="montaje_electrico"
                      class="radio-input"
                      required
                      aria-required="true"
                    />
                    <label for="montaje_electrico" class="radio-label">
                      <span class="radio-icon">‚ö°</span>
                      <span class="radio-text">Montaje El√©ctrico</span>
                    </label>
                  </div>

                  <div class="radio-item">
                    <input
                      type="radio"
                      id="mantenimiento_mecanico"
                      name="tipo_servicio"
                      value="mantenimiento_mecanico"
                      class="radio-input"
                      required
                      aria-required="true"
                    />
                    <label for="mantenimiento_mecanico" class="radio-label">
                      <span class="radio-icon">‚öôÔ∏è</span>
                      <span class="radio-text">Mantenimiento Mec√°nico</span>
                    </label>
                  </div>

                  <div class="radio-item">
                    <input
                      type="radio"
                      id="montaje_neumatico"
                      name="tipo_servicio"
                      value="montaje_neumatico"
                      class="radio-input"
                      required
                      aria-required="true"
                    />
                    <label for="montaje_neumatico" class="radio-label">
                      <span class="radio-icon">üí®</span>
                      <span class="radio-text">Montaje Neum√°tico</span>
                    </label>
                  </div>

                  <div class="radio-item">
                    <input
                      type="radio"
                      id="montaje_hidraulico"
                      name="tipo_servicio"
                      value="montaje_hidraulico"
                      class="radio-input"
                      required
                      aria-required="true"
                    />
                    <label for="montaje_hidraulico" class="radio-label">
                      <span class="radio-icon">üíß</span>
                      <span class="radio-text">Montaje Hidr√°ulico</span>
                    </label>
                  </div>

                  <div class="radio-item">
                    <input
                      type="radio"
                      id="servicios_metalmecanicos"
                      name="tipo_servicio"
                      value="servicios_metalmecanicos"
                      class="radio-input"
                      required
                      aria-required="true"
                    />
                    <label for="servicios_metalmecanicos" class="radio-label">
                      <span class="radio-icon">üî©</span>
                      <span class="radio-text">Servicios Metalmec√°nicos</span>
                    </label>
                  </div>

                  <div class="radio-item">
                    <input
                      type="radio"
                      id="pintura_silos"
                      name="tipo_servicio"
                      value="pintura_silos"
                      class="radio-input"
                      required
                      aria-required="true"
                    />
                    <label for="pintura_silos" class="radio-label">
                      <span class="radio-icon">üé®</span>
                      <span class="radio-text"
                        >Servicios de Pintura de Silos y Equipos</span
                      >
                    </label>
                  </div>

                  <div class="radio-item">
                    <input
                      type="radio"
                      id="desmonte_transporte_izaje"
                      name="tipo_servicio"
                      value="desmonte_transporte_izaje"
                      class="radio-input"
                      required
                      aria-required="true"
                    />
                    <label for="desmonte_transporte_izaje" class="radio-label">
                      <span class="radio-icon">üèóÔ∏è</span>
                      <span class="radio-text"
                        >Desmonte - Transporte e Izaje de Silos y Equipos
                        Industriales</span
                      >
                    </label>
                  </div>
                </div>
                <div class="invalid-feedback" role="alert">
                  Por favor seleccione un tipo de servicio
                </div>
              </fieldset>

              <!-- Nombre Completo -->
              <div class="form-group mb-4">
                <label for="nombre_completo" class="form-label">
                  Nombre Completo *
                </label>
                <input
                  type="text"
                  id="nombre_completo"
                  name="nombre_completo"
                  class="form-control"
                  placeholder="Ej: Juan P√©rez Garc√≠a"
                  required
                  aria-required="true"
                  autocomplete="name"
                  minlength="3"
                  maxlength="100"
                />
                <div class="invalid-feedback" role="alert">
                  Por favor ingrese su nombre completo
                </div>
              </div>

              <!-- Correo Electr√≥nico -->
              <div class="form-group mb-4">
                <label for="email" class="form-label">
                  Correo Electr√≥nico *
                </label>
                <input
                  type="email"
                  id="email"
                  name="email"
                  class="form-control"
                  placeholder="ejemplo@correo.com"
                  required
                  aria-required="true"
                  autocomplete="email"
                />
                <div class="invalid-feedback" role="alert">
                  Por favor ingrese un correo electr√≥nico v√°lido
                </div>
              </div>

              <!-- Raz√≥n Social de la Empresa -->
              <div class="form-group mb-4">
                <label for="empresa" class="form-label">
                  Raz√≥n Social de la Empresa
                </label>
                <input
                  type="text"
                  id="empresa"
                  name="empresa"
                  class="form-control"
                  placeholder="Ej: Industrias ABC S.A.S"
                  autocomplete="organization"
                  maxlength="150"
                />
                <small class="form-text"
                  >Opcional - Si representa a una empresa</small
                >
              </div>

              <!-- Tel√©fono de Contacto -->
              <div class="form-group mb-4">
                <label for="telefono" class="form-label">
                  Tel√©fono de Contacto *
                </label>
                <input
                  type="tel"
                  id="telefono"
                  name="telefono"
                  class="form-control"
                  placeholder="300 123 4567"
                  required
                  aria-required="true"
                  autocomplete="tel"
                  pattern="[0-9\s\-\+\(\)]+"
                  minlength="7"
                  maxlength="20"
                />
                <div class="invalid-feedback" role="alert">
                  Por favor ingrese un n√∫mero de tel√©fono v√°lido
                </div>
              </div>

              <!-- Fecha Deseada de Atenci√≥n -->
              <div class="form-group mb-4">
                <label for="fecha_atencion" class="form-label">
                  Fecha Deseada de Atenci√≥n
                </label>
                <input
                  type="date"
                  id="fecha_atencion"
                  name="fecha_atencion"
                  class="form-control"
                  min=""
                  aria-label="Seleccione la fecha deseada para el servicio"
                />
                <small class="form-text"
                  >Opcional - Indique cu√°ndo necesita el servicio</small
                >
              </div>

              <!-- Descripci√≥n de la Necesidad -->
              <div class="form-group mb-4">
                <label for="descripcion" class="form-label">
                  Descripci√≥n de la Necesidad *
                </label>
                <textarea
                  id="descripcion"
                  name="descripcion"
                  class="form-control"
                  rows="6"
                  placeholder="Describa detalladamente el servicio que necesita, caracter√≠sticas espec√≠ficas, urgencia, etc."
                  required
                  aria-required="true"
                  minlength="20"
                  maxlength="1000"
                ></textarea>
                <div class="char-counter">
                  <span id="charCount">0</span> / 1000 caracteres
                </div>
                <div class="invalid-feedback" role="alert">
                  Por favor describa su necesidad (m√≠nimo 20 caracteres)
                </div>
              </div>

              <!-- Bot√≥n de Env√≠o -->
              <div class="form-group mb-3">
                <button
                  type="submit"
                  id="btnEnviar"
                  class="btn-submit"
                  aria-label="Enviar solicitud de servicio"
                >
                  <span class="btn-icon">üì©</span>
                  <span id="btnTexto">ENVIAR SOLICITUD</span>
                </button>
              </div>

              <!-- Mensaje de Confianza -->
              <div class="trust-message text-center">
                <p class="trust-text">
                  üîí Su informaci√≥n es confidencial. Responderemos en menos de
                  24 horas.
                </p>
              </div>
            </form>
          </div>
        </div>
      </section>
    </main>

    <footer>
      <div class="container">
        <div class="row align-items-center">
          <!-- Columna 1: Informaci√≥n de la empresa -->
          <div class="col-md-4 mb-4 mb-md-0 footer-section">
            <h5 style="font-size: 1.5rem; font-weight: 600">SEAM INGENIER√çA</h5>
            <div class="contact-info">
              <p class="mb-2" style="font-size: 1.1rem; color: #000 !important">
                <i
                  class="bi bi-lightbulb-fill"
                  style="color: #000 !important"
                ></i>
                Innovaci√≥n, calidad y confianza.
              </p>
              <p class="mb-2" style="font-size: 1.1rem; color: #000 !important">
                <i
                  class="bi bi-telephone-fill"
                  style="color: #000 !important"
                ></i>
                (2) 374 4545
              </p>
              <p class="mb-2" style="font-size: 1.1rem; color: #000 !important">
                <i class="bi bi-phone-fill" style="color: #000 !important"></i>
                3017979077-3207552496-311 7191963
              </p>
              <p class="mb-2" style="font-size: 1.1rem; color: #000 !important">
                <i
                  class="bi bi-geo-alt-fill"
                  style="color: #000 !important"
                ></i>
                Cali, Valle del Cauca, Colombia
              </p>
            </div>
          </div>
          <!-- Columna 2: Mapa -->
          <div class="col-md-4 mb-4 mb-md-0 footer-section">
            <div class="map-container">
              <iframe
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3982.5034416842186!2d-76.51546302603748!3d3.4700122510985643!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8e30a63089507a79%3A0x92acb8bc88159ea7!2sSEAM%20Ingenier%C3%ADa%20E.U.!5e0!3m2!1ses!2sco!4v1762307461833!5m2!1ses!2sco"
                allowfullscreen=""
                loading="lazy"
                referrerpolicy="no-referrer-when-downgrade"
              >
              </iframe>
            </div>
          </div>

          <!-- Columna 3: Redes sociales -->
          <div class="col-md-4 footer-section">
            <h5 class="text-center">S√≠guenos</h5>
            <div class="social-links">
              <a href="#" class="facebook" title="Facebook">
                <i class="bi bi-facebook"></i>
              </a>
              <a href="#" class="instagram" title="Instagram">
                <i class="bi bi-instagram"></i>
              </a>
              <a href="#" class="whatsapp" title="WhatsApp">
                <i class="bi bi-whatsapp"></i>
              </a>
              <a href="#" class="linkedin" title="LinkedIn">
                <i class="bi bi-linkedin"></i>
              </a>
            </div>
          </div>
        </div>

        <!-- Copyright -->
        <div class="footer-bottom">
          <div class="text-center">
            <p>¬© 2025 SEAM INGENIER√çA ‚Äî Todos los derechos reservados.</p>
          </div>
        </div>
      </div>
    </footer>

    <script src="javascript/bootstrap.bundle.min.js"></script>
    <script src="js/script.js"></script>

    <!-- SCRIPT CORREGIDO PARA ENVIAR EL FORMULARIO -->
    <script>
      // Contador de caracteres
      const textarea = document.getElementById("descripcion");
      const charCount = document.getElementById("charCount");

      if (textarea && charCount) {
        textarea.addEventListener("input", function () {
          charCount.textContent = this.value.length;
        });
      }

      // Establecer fecha m√≠nima
      const fechaInput = document.getElementById("fecha_atencion");
      if (fechaInput) {
        const hoy = new Date().toISOString().split("T")[0];
        fechaInput.setAttribute("min", hoy);
      }

      // Manejo del formulario
      const form = document.getElementById("solicitudForm");
      const btnEnviar = document.getElementById("btnEnviar");
      const btnTexto = document.getElementById("btnTexto");
      const mensajeRespuesta = document.getElementById("mensajeRespuesta");

      form.addEventListener("submit", async function (e) {
        e.preventDefault();

        // Validar formulario
        if (!form.checkValidity()) {
          // Marcar campos inv√°lidos
          Array.from(form.elements).forEach((element) => {
            if (element.required && !element.validity.valid) {
              element.classList.add("is-invalid");
            }
          });

          mensajeRespuesta.style.display = "block";
          mensajeRespuesta.style.backgroundColor = "#f8d7da";
          mensajeRespuesta.style.color = "#721c24";
          mensajeRespuesta.textContent =
            "‚ùå Por favor complete todos los campos obligatorios";
          mensajeRespuesta.scrollIntoView({
            behavior: "smooth",
            block: "center",
          });
          return;
        }

        // Deshabilitar bot√≥n y mostrar loading
        btnEnviar.disabled = true;
        btnTexto.textContent = "ENVIANDO...";
        mensajeRespuesta.style.display = "none";

        const formData = new FormData(form);

        try {
          console.log("Enviando formulario a procesar-solicitud.php...");

          const response = await fetch("procesar-solicitud.php", {
            method: "POST",
            body: formData,
          });

          console.log("Respuesta recibida:", response.status);

          // Verificar si la respuesta es JSON
          const contentType = response.headers.get("content-type");
          if (!contentType || !contentType.includes("application/json")) {
            throw new Error("La respuesta no es JSON v√°lido");
          }

          const result = await response.json();
          console.log("Resultado:", result);

          // Mostrar mensaje
          mensajeRespuesta.style.display = "block";

          if (result.success) {
            mensajeRespuesta.style.backgroundColor = "#d4edda";
            mensajeRespuesta.style.color = "#155724";
            mensajeRespuesta.textContent = "‚úÖ " + result.message;
            form.reset();
            charCount.textContent = "0";
          } else {
            mensajeRespuesta.style.backgroundColor = "#f8d7da";
            mensajeRespuesta.style.color = "#721c24";
            mensajeRespuesta.textContent = "‚ùå " + result.message;
          }

          // Scroll al mensaje
          mensajeRespuesta.scrollIntoView({
            behavior: "smooth",
            block: "center",
          });
        } catch (error) {
          console.error("Error:", error);
          mensajeRespuesta.style.display = "block";
          mensajeRespuesta.style.backgroundColor = "#f8d7da";
          mensajeRespuesta.style.color = "#721c24";
          mensajeRespuesta.textContent =
            "‚ùå Error de conexi√≥n: " +
            error.message +
            ". Por favor, int√©ntelo nuevamente.";
          mensajeRespuesta.scrollIntoView({
            behavior: "smooth",
            block: "center",
          });
        } finally {
          // Rehabilitar bot√≥n
          btnEnviar.disabled = false;
          btnTexto.textContent = "ENVIAR SOLICITUD";
        }
      });

      // Remover clase de error al escribir
      form.addEventListener("input", function (e) {
        if (
          e.target.classList.contains("is-invalid") &&
          e.target.validity.valid
        ) {
          e.target.classList.remove("is-invalid");
        }
      });
    </script>
  </body>
</html>
