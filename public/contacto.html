<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Página de Inicio - Sitio Web Profesional</title>
    <link href="css/bootstrap.min.css" rel="stylesheet" />
    <link href="css/contacto.css" rel="stylesheet" />
    <meta
      name="description"
      content="Descripción concisa y atractiva de tu página web (máximo 160 caracteres). Palabras clave aquí."
    />
    <meta
      name="keywords"
      content="web profesional, programación, front-end, diseño web, (Tus temas clave)"
    />
    <meta name="author" content="Tu Nombre o Nombre de tu Empresa" />
    <link rel="icon" type="image/png" href="imagenes/1.png" />

    <!-- Bootstrap Icons -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
      rel="stylesheet"
    />

    <!-- google fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css"
    />
  </head>
  <body>
    <header>
      <!-- Barra de navegación -->
      <nav class="navbar navbar-expand-lg">
        <div class="container d-flex ms-3">
          <!-- Logo -->
          <!-- Logo: reducimos un poco el margin-end para que no se separe -->
          <a class="navbar-brand fw-bold me-2" ref="#">
            <img
              src="imagenes/logoia2.png"
              alt="Logo"
              class="logo-animado"
              style="height: 82px; width: 186px"
            />
          </a>

          <!-- Botón hamburguesa (visible en móviles) -->
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#menuPrincipal"
            aria-controls="menuPrincipal"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>

          <!-- Menú -->
          <div
            class="collapse navbar-collapse justify-content-center"
            id="menuPrincipal"
          >
            <ul class="navbar-nav gap-5 ms-auto mx-auto text-center">
              <li class="nav-item">
                <a class="nav-link active" href="index.html">Inicio</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="servicios.html">Servicios</a>
              </li>

              <li class="nav-item">
                <a class="nav-link" href="solicitar.html">Solicitar</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="fag.html">FAQ</a>
              </li>

              <li class="nav-item">
                <a class="nav-link" href="blog.html">Blog</a>
              </li>
            </ul>
            <!-- Botón Login -->
            <a href="#" class="btn-login ms-3 btn-lg">
              <i class="bi bi-person-circle me-2"></i>Login
            </a>
          </div>
        </div>
      </nav>
    </header>

    <main>
      <section id="contacto" class="py-3">
        <div class="container">
          <!-- Título de la sección -->
          <div class="row mb-1">
            <div class="col-12 text-center">
              <h1 class="display-4 fw-bold mb-2">Contacto</h1>
              <p class="lead text-muted">Estamos aquí para ayudarte</p>
            </div>
          </div>

          <div class="row g-4 align-items-start">
            <!-- Columna izquierda: Información de contacto AGRUPADA -->
            <div class="col-lg-5 col-md-6">
              <div class="contact-info-unified">
                <h2 class="contact-main-title mb-4">Información de Contacto</h2>

                <!-- Ubicación -->
                <div class="info-item mb-4">
                  <div class="info-icon">
                    <i class="bi bi-geo-alt-fill"></i>
                  </div>
                  <div class="info-content">
                    <h3 class="info-title">Ubicación</h3>
                    <p class="info-text">
                      Carrera 4Nte No. 41N – 21 Cali, Valle<br />
                      Cali, Valle del Cauca, Colombia
                    </p>
                  </div>
                </div>

                <!-- Teléfonos -->
                <div class="info-item mb-4">
                  <div class="info-icon">
                    <i class="bi bi-telephone-fill"></i>
                  </div>
                  <div class="info-content">
                    <h3 class="info-title">Teléfonos</h3>
                    <p class="info-text">
                      <a href="tel:+5723744545">Tel: (2) 374 4545</a><br />
                      <a href="tel:+573117191963"
                        >Cel: 311 7191963 - 320 7552496 - 301 7979077</a
                      >
                    </p>
                  </div>
                </div>

                <!-- Correos -->
                <div class="info-item">
                  <div class="info-icon">
                    <i class="bi bi-envelope-fill"></i>
                  </div>
                  <div class="info-content">
                    <h3 class="info-title">Correos Electrónicos</h3>
                    <p class="info-text">
                      <a href="mailto:iccastaneda@seamingenieria.com"
                        >iccastaneda@seamingenieria.com</a
                      ><br />
                      <a href="mailto:ingenieria@seamingenieria.com"
                        >ingenieria@seamingenieria.com</a
                      >
                    </p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Columna derecha: Formulario de contacto MEJORADO -->
            <div class="col-lg-7 col-md-6">
              <div class="contact-form-container">
                <h2 class="form-title mb-4">Envíanos un Mensaje</h2>

                <!-- Mensaje de éxito (oculto por defecto) -->
                <div
                  id="mensajeExito"
                  class="alert alert-success d-none"
                  role="alert"
                >
                  <i class="bi bi-check-circle-fill me-2"></i>
                  <strong>¡Mensaje enviado correctamente!</strong> Nos pondremos
                  en contacto contigo pronto.
                </div>

                <!-- Mensaje de error (oculto por defecto) -->
                <div
                  id="mensajeError"
                  class="alert alert-danger d-none"
                  role="alert"
                >
                  <i class="bi bi-exclamation-triangle-fill me-2"></i>
                  <strong>Error:</strong> No se pudo enviar el mensaje. Por
                  favor, intenta nuevamente.
                </div>

                <!--formulario-->
                <form
                  id="contactForm"
                  class="contact-form"
                  action="contacto.php"
                  method="POST"
                >
                  <!-- Nombre con label visible -->
                  <div class="mb-4">
                    <label for="nombre" class="form-label"
                      >Nombre completo *</label
                    >
                    <input
                      type="text"
                      class="form-control form-control-lg"
                      id="nombre"
                      name="nombre"
                      placeholder="Ej: Juan Pérez"
                      required
                      autocomplete="name"
                      minlength="3"
                      maxlength="100"
                    />
                  </div>

                  <!-- Email con label visible -->
                  <div class="mb-4">
                    <label for="email" class="form-label"
                      >Correo electrónico *</label
                    >
                    <input
                      type="email"
                      class="form-control form-control-lg"
                      id="email"
                      name="email"
                      placeholder="ejemplo@correo.com"
                      required
                      autocomplete="email"
                      maxlength="100"
                    />
                  </div>

                  <!-- NUEVO CAMPO: Asunto -->
                  <div class="mb-4">
                    <label for="asunto" class="form-label">Asunto *</label>
                    <select
                      class="form-control form-control-lg"
                      id="asunto"
                      name="asunto"
                      required
                    >
                      <option value="" disabled selected>
                        Selecciona el tipo de mensaje
                      </option>
                      <option value="consulta">Consulta</option>
                      <option value="queja">Queja</option>
                      <option value="sugerencia">Sugerencia</option>
                      <option value="cotizacion">
                        Solicitud de Cotización
                      </option>
                      <option value="otro">Otro</option>
                    </select>
                  </div>

                  <!-- Mensaje con label visible y mayor altura -->
                  <div class="mb-4">
                    <label for="mensaje" class="form-label">Mensaje *</label>
                    <textarea
                      class="form-control form-control-lg"
                      id="mensaje"
                      name="mensaje"
                      rows="6"
                      placeholder="Cuéntanos cómo podemos ayudarte..."
                      required
                      minlength="10"
                      maxlength="1000"
                    ></textarea>
                    <small class="form-text text-muted">
                      <span id="caracteresRestantes">1000</span> caracteres
                      restantes
                    </small>
                  </div>

                  <!-- Botón mejorado: más grande, azul, 100% ancho -->
                  <div class="d-grid">
                    <button
                      type="submit"
                      class="btn-enviar-mejorado"
                      id="btnEnviar"
                    >
                      <i class="bi bi-send-fill me-2"></i>Enviar Mensaje
                    </button>
                  </div>

                  <p class="form-note mt-3 text-center">
                    * Campos obligatorios
                  </p>
                </form>

                <!--formulario-->
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Script para validación y envío del formulario -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const form = document.getElementById("contactForm");
        const mensajeTextarea = document.getElementById("mensaje");
        const caracteresRestantes = document.getElementById(
          "caracteresRestantes"
        );
        const btnEnviar = document.getElementById("btnEnviar");
        const mensajeExito = document.getElementById("mensajeExito");
        const mensajeError = document.getElementById("mensajeError");

        // Contador de caracteres para el mensaje
        mensajeTextarea.addEventListener("input", function () {
          const restantes = 1000 - this.value.length;
          caracteresRestantes.textContent = restantes;

          if (restantes < 100) {
            caracteresRestantes.style.color = "#dc3545";
          } else {
            caracteresRestantes.style.color = "#6c757d";
          }
        });

        // Manejo del envío del formulario
        form.addEventListener("submit", function (e) {
          e.preventDefault();

          console.log("Formulario enviado - iniciando proceso...");

          // Ocultar mensajes previos
          mensajeExito.classList.add("d-none");
          mensajeError.classList.add("d-none");

          // Deshabilitar botón y mostrar carga
          btnEnviar.disabled = true;
          btnEnviar.innerHTML =
            '<span class="spinner-border spinner-border-sm me-2"></span>Enviando...';

          // Obtener datos del formulario
          const formData = new FormData(form);

          console.log("Datos del formulario:", {
            nombre: formData.get("nombre"),
            email: formData.get("email"),
            asunto: formData.get("asunto"),
            mensaje: formData.get("mensaje"),
          });

          // Enviar datos por AJAX
          fetch("contacto.php", {
            method: "POST",
            body: formData,
          })
            .then((response) => {
              console.log("Respuesta recibida:", response);
              console.log("Status:", response.status);
              console.log("Status Text:", response.statusText);

              // Intentar leer como texto primero para ver qué devuelve
              return response.text();
            })
            .then((text) => {
              console.log("Respuesta como texto:", text);

              // Intentar parsear como JSON
              try {
                const data = JSON.parse(text);
                console.log("Datos parseados:", data);

                if (data.success) {
                  // Mostrar mensaje de éxito
                  mensajeExito.classList.remove("d-none");
                  mensajeExito.innerHTML = `<i class="bi bi-check-circle-fill me-2"></i><strong>¡Mensaje enviado!</strong> ${data.message}`;
                  mensajeExito.scrollIntoView({
                    behavior: "smooth",
                    block: "center",
                  });

                  // Limpiar formulario
                  form.reset();
                  caracteresRestantes.textContent = "1000";
                  caracteresRestantes.style.color = "#6c757d";

                  // Limpiar clases de validación
                  const inputs = form.querySelectorAll(
                    "input, select, textarea"
                  );
                  inputs.forEach((input) => {
                    input.classList.remove("is-valid", "is-invalid");
                  });
                } else {
                  // Mostrar mensaje de error
                  mensajeError.classList.remove("d-none");
                  mensajeError.innerHTML = `<i class="bi bi-exclamation-triangle-fill me-2"></i><strong>Error:</strong> ${data.message}`;
                  mensajeError.scrollIntoView({
                    behavior: "smooth",
                    block: "center",
                  });
                }
              } catch (e) {
                console.error("Error al parsear JSON:", e);
                console.error("Texto recibido:", text);

                // Mostrar el error
                mensajeError.classList.remove("d-none");
                mensajeError.innerHTML = `<i class="bi bi-exclamation-triangle-fill me-2"></i><strong>Error:</strong> La respuesta del servidor no es válida. Revisa la consola del navegador para más detalles.`;
                mensajeError.scrollIntoView({
                  behavior: "smooth",
                  block: "center",
                });
              }
            })
            .catch((error) => {
              // Error de conexión
              console.error("Error de conexión:", error);
              mensajeError.classList.remove("d-none");
              mensajeError.innerHTML = `<i class="bi bi-exclamation-triangle-fill me-2"></i><strong>Error de conexión:</strong> No se pudo conectar con el servidor. Verifica que el archivo procesar_contacto.php existe y está accesible.`;
              mensajeError.scrollIntoView({
                behavior: "smooth",
                block: "center",
              });
            })
            .finally(() => {
              // Rehabilitar botón
              btnEnviar.disabled = false;
              btnEnviar.innerHTML =
                '<i class="bi bi-send-fill me-2"></i>Enviar Mensaje';
              console.log("Proceso finalizado");
            });
        });

        // Validación en tiempo real
        const inputs = form.querySelectorAll("input, select, textarea");
        inputs.forEach((input) => {
          input.addEventListener("blur", function () {
            if (this.value.trim() === "" && this.hasAttribute("required")) {
              this.classList.add("is-invalid");
              this.classList.remove("is-valid");
            } else if (this.value.trim() !== "") {
              this.classList.remove("is-invalid");
              this.classList.add("is-valid");
            }
          });
        });
      });
    </script>

    <footer>
      <div class="container">
        <div class="row align-items-center">
          <!-- Columna 1: Información de la empresa -->
          <!-- Columna 1: Información de la empresa -->
          <div class="col-md-4 mb-4 mb-md-0 footer-section">
            <h5 style="font-size: 1.5rem; font-weight: 600">SEAM INGENIERÍA</h5>
            <div class="contact-info">
              <p class="mb-2" style="font-size: 1.1rem; color: #000 !important">
                <i
                  class="bi bi-lightbulb-fill"
                  style="color: #000 !important"
                ></i>
                Innovación, calidad y confianza.
              </p>
              <p class="mb-2" style="font-size: 1.1rem; color: #000 !important">
                <i
                  class="bi bi-telephone-fill"
                  style="color: #000 !important"
                ></i>
                (2) 374 4545
              </p>
              <p class="mb-2" style="font-size: 1.1rem; color: #000 !important">
                <i class="bi bi-phone-fill" style="color: #000 !important"></i>
                3017979077-3207552496-311 7191963
              </p>
              <p class="mb-2" style="font-size: 1.1rem; color: #000 !important">
                <i
                  class="bi bi-geo-alt-fill"
                  style="color: #000 !important"
                ></i>
                Cali, Valle del Cauca, Colombia
              </p>
            </div>
          </div>
          <!-- Columna 2: Mapa -->
          <div class="col-md-4 mb-4 mb-md-0 footer-section">
            <div class="map-container">
              <iframe
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3982.5034416842186!2d-76.51546302603748!3d3.4700122510985643!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8e30a63089507a79%3A0x92acb8bc88159ea7!2sSEAM%20Ingenier%C3%ADa%20E.U.!5e0!3m2!1ses!2sco!4v1762307461833!5m2!1ses!2sco"
                allowfullscreen=""
                loading="lazy"
                referrerpolicy="no-referrer-when-downgrade"
              >
              </iframe>
            </div>
          </div>

          <!-- Columna 3: Redes sociales -->
          <div class="col-md-4 footer-section">
            <h5 class="text-center">Síguenos</h5>
            <div class="social-links">
              <a href="#" class="facebook" title="Facebook">
                <i class="bi bi-facebook"></i>
              </a>
              <a href="#" class="instagram" title="Instagram">
                <i class="bi bi-instagram"></i>
              </a>
              <a href="#" class="whatsapp" title="WhatsApp">
                <i class="bi bi-whatsapp"></i>
              </a>
              <a href="#" class="linkedin" title="LinkedIn">
                <i class="bi bi-linkedin"></i>
              </a>
            </div>
          </div>
        </div>

        <!-- Copyright -->
        <div class="footer-bottom">
          <div class="text-center">
            <p>© 2025 SEAM INGENIERÍA — Todos los derechos reservados.</p>
          </div>
        </div>
      </div>
    </footer>
    <script src="javascript/bootstrap.bundle.min.js"></script>
    <script src="javascript/contacto.js"></script>
  </body>
</html>
